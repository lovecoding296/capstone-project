-- Create the guides table
CREATE TABLE guides (
    id BIGINT IDENTITY(1,1) PRIMARY KEY,
    name NVARCHAR(255) NOT NULL,
    email NVARCHAR(255) UNIQUE NOT NULL,
    phone NVARCHAR(50),
    location NVARCHAR(255)
);
GO

-- Create the tourists table
CREATE TABLE tourists (
    id BIGINT IDENTITY(1,1) PRIMARY KEY,
    name NVARCHAR(255) NOT NULL,
    email NVARCHAR(255) UNIQUE NOT NULL,
    phone NVARCHAR(50)
);
GO

-- Create the tours table
CREATE TABLE tours (
    id BIGINT IDENTITY(1,1) PRIMARY KEY,
    title NVARCHAR(255) NOT NULL,
    description NVARCHAR(MAX),
    price DECIMAL(10,2) NOT NULL,
    guide_id BIGINT NOT NULL,
    CONSTRAINT FK_Tour_Guide FOREIGN KEY (guide_id) REFERENCES guides(id) ON DELETE CASCADE
);
GO

-- Create the bookings table
CREATE TABLE bookings (
    id BIGINT IDENTITY(1,1) PRIMARY KEY,
    date DATE NOT NULL,
    tourist_id BIGINT NOT NULL,
    tour_id BIGINT NOT NULL,
    CONSTRAINT FK_Booking_Tourist FOREIGN KEY (tourist_id) REFERENCES tourists(id) ON DELETE CASCADE,
    CONSTRAINT FK_Booking_Tour FOREIGN KEY (tour_id) REFERENCES tours(id) ON DELETE CASCADE
);
GO
