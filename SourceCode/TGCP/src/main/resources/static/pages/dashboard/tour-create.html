<div id="tour-create" class="content-section" >
	<h3 class="text-center page-title">Tạo Tour mới
	</h3>
	<form id="tourForm" method="post" class="container mt-4" enctype="multipart/form-data">

		<!-- Upload nhiều ảnh -->
		<div class="mb-3">
			<label for="images" class="form-label">Tải lên ảnh</label>
			<input type="file" id="images" name="files" multiple accept="image/*" class="form-control"
				onchange="previewImages()" required>
		</div>

		<!-- Khu vực xem trước ảnh -->
		<div id="previewContainer" class="d-flex flex-wrap"></div>

		<br><br>

		<div class="mb-3">
			<label for="title" class="form-label">Tiêu đề</label>
			<input type="text" id="title" class="form-control" required>
		</div>

		<div class="mb-3">
			<label for="destination" class="form-label">Thành phố</label>
			<input type="text" id="destination" class="form-control" required>
		</div>

		<div class="mb-3">
		    <label for="category" class="form-label">Danh mục</label>
		    <select id="category" name="category" class="form-control" required>
		        <option value="">-- Chọn danh mục --</option>
		        <option value="FOODTOUR">FOODTOUR</option>
		        <option value="SURVIVAL">SURVIVAL</option>
		        <option value="NATURE_EXPLORATION">NATURE EXPLORATION</option>
		        <option value="ADVENTURE">ADVENTURE</option>
		        <option value="RELAXATION">RELAXATION</option>
		        <option value="CULTURAL">CULTURAL</option>
		        <option value="CULINARY">CULINARY</option>
		        <option value="ECO_TOURISM">ECO TOURISM</option>
		        <option value="SPIRITUAL">SPIRITUAL</option>
		        <option value="BEACH">BEACH</option>
		        <option value="CAMPING">CAMPING</option>
		        <option value="SPORTS">SPORTS</option>
		        <option value="VOLUNTEER">VOLUNTEER</option>
		    </select>
		</div>



		<button type="button" onclick="addItinerary()">Thêm Hành Trình</button>
		<div id="itineraryContainer"></div>


		<div class="mb-3">
			<label class="form-check-label">
				<input type="checkbox" id="ageRestricted" name="ageRestricted" class="form-check-input"
					onchange="toggleAgeInputs()">
				Giới hạn độ tuổi
			</label>
		</div>

		<div id="ageInputs" class="mb-3" style="display: none;"></div>

		




		<div class="mb-3">
			<label for="startDate" class="form-label">Ngày bắt đầu</label>
			<input type="datetime-local" id="startDate" class="form-control" required>
		</div>

		<div class="mb-3">
			<label for="endDate" class="form-label">Ngày kết thúc</label>
			<input type="datetime-local" id="endDate" class="form-control" required>
		</div>











		<!--		--------------------------------------
						<div class="d-flex">
							 Dropdown chọn ngôn ngữ 
							<div class="dropdown me-3">
								<button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
									Chọn ngôn ngữ
								</button>
								<ul class="dropdown-menu scrollable-dropdown">
									<li th:each="lang : ${languages}">
										<input type="checkbox" th:id="${'lang_' + lang}" th:name="languages" th:value="${lang}"
											th:checked="${#sets.contains(tour.languages, lang)}" class="form-check-input lang-checkbox"
											onchange="updateSelectedLanguages()">
										<label th:for="${'lang_' + lang}" class="form-check-label" th:text="${lang}"></label>
									</li>
								</ul>
							</div>

							 Danh sách ngôn ngữ đã chọn 
							<div>
								<p id="selectedLanguages"></p>
							</div>
						</div>

						<script>
							function updateSelectedLanguages() {
								let selectedLanguages = [];
								document.querySelectorAll('.lang-checkbox:checked').forEach(checkbox => {
									selectedLanguages.push(checkbox.value);
								});

								let display = selectedLanguages.length > 0 ? selectedLanguages.join(', ') : "";
								document.getElementById('selectedLanguages').innerText = display;
							}

							// Gọi hàm này khi trang tải để hiển thị danh sách ngôn ngữ đã chọn sẵn
							document.addEventListener("DOMContentLoaded", updateSelectedLanguages);

						</script>-->



		<div class="mb-3">
			<label for="description" class="form-label">Mô tả chi tiết</label>
			<textarea id="description" class="form-control" rows="4" required></textarea>
		</div>

		<div class="mb-3">
			<label for="price" class="form-label">Giá</label>
			<input type="number" id="price" class="form-control" required>
		</div>

		<div class="mb-3">
			<label for="maxParticipants" class="form-label">Số người tham gia tối đa</label>
			<input type="number" id="maxParticipants" class="form-control" min="2" required>
		</div>


		<button type="button" class="btn btn-primary" onclick="submitTour()">Lưu Tour</button>
		<a sec:authorize="!isAnonymous()" th:href="@{/tours/creator/{id}(id=${session.loggedInUser.id})}"
			class="btn btn-secondary">Hủy</a>
	</form>

</div>